<!DOCTYPE html> 
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Feliz Aniversario</title>

  <!-- Fuente Pacifico -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0;
      background-color: black;
      font-family: 'Pacifico', cursive;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      flex-direction: column;
      text-align: center;
    }

    h1 {
      font-size: 3rem;
      color: black;
      text-shadow: 0 0 10px white;
      margin-bottom: 50px;
    }

    .button-container {
      display: flex;
      gap: 50px;
    }

    .button {
      background-color: transparent;
      border: none;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: transform 0.3s;
    }

    .button:hover {
      transform: scale(1.1);
    }

    .button img {
      width: 150px;
      height: auto;
      border: none;
      margin-bottom: 10px;
      transition: transform 0.3s;
    }

    .button img:hover {
      transform: scale(1.1);
    }

    .button button {
      font-family: 'Pacifico', cursive;
      font-size: 1.2rem;
      padding: 10px 20px;
      margin-top: 10px;
      border: 2px solid #fff;
      background-color: transparent;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.2s ease, background-color 0.2s ease;
    }

    .button button:hover {
      transform: scale(1.05);
      background-color: rgba(255, 255, 255, 0.1);
    }

    .button button:active {
      transform: scale(0.95);
    }

    .music-player {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(90deg, #c2e9fb, #a1c4fd);
      border-radius: 25px;
      padding: 15px 30px;
      display: flex;
      align-items: center;
      gap: 15px;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
      font-family: 'Pacifico', cursive;
      font-size: 1rem;
      color: black;
      z-index: 1000;
      border: 2px solid white;
    }

    .music-player button {
      background-color: white;
      color: #3366cc;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 1.2rem;
      cursor: pointer;
      transition: transform 0.2s ease, background-color 0.3s ease;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    .music-player button:hover {
      background-color: #e0f0ff;
      transform: scale(1.1);
    }

    #songName {
      max-width: 180px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    #visualizer {
      width: 100%;
      height: 60px;
      position: fixed;
      bottom: 90px;
      left: 0;
      z-index: 999;
    }

    .shuffle-on {
      background-color: #ffe0f7 !important;
      color: #cc33aa !important;
    }
  </style>
</head>
<body>
  <h1>Feliz Aniversario</h1>

  <div class="button-container">
    <div class="button">
      <img src="https://lyhuwu.github.io/Felyhh-aniversario-/love-letter-envelope-free-vector-removebg-preview.png" alt="Bot贸n A" />
      <button onclick="window.location.href='https://lyhuwu.github.io/Feliz-aniversario-/'">Una cartita con mucho amor</button>
    </div>

    <div class="button">
      <img src="https://lyhuwu.github.io/Felyhh-aniversario-/universssso.png" alt="Bot贸n B" />
      <button onclick="window.location.href='https://lyhuwu.github.io/te-amo-en-todos-los-universos/'">T煤 y yo siempre</button>
    </div>
  </div>

  <canvas id="visualizer"></canvas>

  <div class="music-player">
    <button onclick="prevSong()">锔</button>
    <button onclick="togglePlayPause()" id="playPauseBtn">讹</button>
    <button onclick="nextSong()">锔</button>
    <button onclick="toggleShuffle()" id="shuffleBtn"></button>
    <span id="songName"></span>
    <audio id="audioPlayer" crossorigin="anonymous"></audio>
  </div>

  <script>
    const songs = [
      { src: "canciones/1.mp3", name: "Nuestro primer baile" },
      { src: "canciones/2.mp3", name: "Luz de luna" },
      { src: "canciones/3.mp3", name: "Contigo todo" },
      { src: "canciones/4.mp3", name: "Dulce despertar" },
      { src: "canciones/5.mp3", name: "Universo a tu lado" },
      { src: "canciones/6.mp3", name: "Notas para ti" },
      { src: "canciones/7.mp3", name: "Sonrisas eternas" },
      { src: "canciones/8.mp3", name: "Te pienso, te abrazo" },
      { src: "canciones/9.mp3", name: "Siempre juntos" },
      { src: "canciones/10.mp3", name: "Amor sin fin" }
    ];

    let currentSong = Math.floor(Math.random() * songs.length);
    const audioPlayer = document.getElementById("audioPlayer");
    const playPauseBtn = document.getElementById("playPauseBtn");
    const songNameDisplay = document.getElementById("songName");
    const shuffleBtn = document.getElementById("shuffleBtn");
    let isShuffle = false;
    audioPlayer.volume = 0.7;

    function loadSong(index) {
      audioPlayer.src = songs[index].src;
      songNameDisplay.textContent = songs[index].name;
      playPauseBtn.textContent = "讹";
    }

    function togglePlayPause() {
      if (audioPlayer.src === "") loadSong(currentSong);
      if (audioPlayer.paused || audioPlayer.ended) {
        audioPlayer.play();
        playPauseBtn.textContent = "革";
      } else {
        audioPlayer.pause();
        playPauseBtn.textContent = "讹";
      }
    }

    function nextSong() {
      if (isShuffle) {
        let next;
        do {
          next = Math.floor(Math.random() * songs.length);
        } while (next === currentSong);
        currentSong = next;
      } else {
        currentSong = (currentSong + 1) % songs.length;
      }
      loadSong(currentSong);
      audioPlayer.play();
      playPauseBtn.textContent = "革";
    }

    function prevSong() {
      if (isShuffle) {
        let prev;
        do {
          prev = Math.floor(Math.random() * songs.length);
        } while (prev === currentSong);
        currentSong = prev;
      } else {
        currentSong = (currentSong - 1 + songs.length) % songs.length;
      }
      loadSong(currentSong);
      audioPlayer.play();
      playPauseBtn.textContent = "革";
    }

    function toggleShuffle() {
      isShuffle = !isShuffle;
      shuffleBtn.classList.toggle("shuffle-on", isShuffle);
    }

    audioPlayer.addEventListener("ended", nextSong);
    window.onload = () => loadSong(currentSong);

    //  Visualizador
    const canvas = document.getElementById("visualizer");
    const ctx = canvas.getContext("2d");
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const analyser = audioCtx.createAnalyser();
    const source = audioCtx.createMediaElementSource(audioPlayer);
    source.connect(analyser);
    analyser.connect(audioCtx.destination);
    analyser.fftSize = 64;

    const bufferLength = analyser.frequencyBinCount;
    const dataArray = new Uint8Array(bufferLength);

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = 60;
    }

    function draw() {
      requestAnimationFrame(draw);
      analyser.getByteFrequencyData(dataArray);
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      const barWidth = canvas.width / bufferLength;
      for (let i = 0; i < bufferLength; i++) {
        const barHeight = dataArray[i] / 2;
        ctx.fillStyle = `rgba(255,255,255,0.6)`;
        ctx.fillRect(i * barWidth, canvas.height - barHeight, barWidth - 2, barHeight);
      }
    }

    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    audioPlayer.onplay = () => {
      audioCtx.resume();
      draw();
    };
  </script>
</body>
</html>
